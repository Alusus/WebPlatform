# WebPlatform

[[English]](asset_routes.en.md)

[[رجوع]](../readme.ar.md)

## إنشاء مسارات الموارد في الخادم

يمكن القيام بذلك ببساطة عن طريق كتابة:

<div dir=rtl>

```
@مسار_موارد عرف مسار_الموارد: "Assets/"؛
```

</div>

```
@assetsRoute def assetsRoute: "Assets/";
```

المسار في هذه الحالة في نظام الملفات سيطابق `./Assets/` بينما في الخادم سيكون `/Assets/`.

ويمكنك تحديد مسار في الخادم مختلف عن المسار في نظام الملفات عبر تمرير مسار الخادم كمعطى
للمبدل `@مسار_موارد` (`@assetsRoute`):

<div dir=rtl>

```
@مسار_موارد["/images/"] عرف مسار_الموارد: "Assets/Images/"؛
```

</div>

```
@assetsRoute["/images/"] def assetsRoute: "Assets/Images/";
```

في المثال أعلاه استخدام المسار `/images/` في المتصفح سيوصلك إلى الملفات التي في المجلد `Assets/Images/`.

مـنصة_ويب تدعم أيضًا تحديد مسارين ضمن نظام الملفات، أحدهما يستخدم عند تنفيذ البرنامج مباشرة من الشفرة
المصدرية، والآخر يستخدم عند تنفيذ البرنامج من نسخة مبنية مسبقًا. تسمح هذه الخاصية للمستخدم بتحديد المكان
الذي ستنسخ إليه المفات عند بناء النسخة الرقمية من البرنامج. على سبيل المثال:

<div dir=rtl>

```
@مسار_موارد["/images/"] عرف مسار_الموارد: ("Assets/Images/"، "الصور/")؛
```

</div>

```
@assetsRoute["/images/"] def assetsRoute: ("Assets/Images/", "Images/");
```

في هذا المثال ستستخدم مـنصة_ويب المسار "Assets/Images" عند تشغيل الخادم باستخدام
الدالة `ابن_وابدأ_الخادم` (`buildAndStartServer`) أو الدالة `ابن_وشغل_الخادم` (`buildAndRunServer`)
وستستخدم المسار الآخر (`الصور` أو `Images`) عند تشغيل الخادم باستخدام `ابدأ_الخادم` (`startServer`)
أو `شغل_الخادم` (`runServer`). تتيح هذه الإمكانية اعتماد هيكلية لنظام الملفات عند بناء نسخة رقمية
من المشروع مختلفة عن تلك التي في الشفرة المصدرية، وهذا مفيد خصوصا في الحالات التي تُحزم فيها الموارد
مع مكتبات مستقلة عن المشروع.

في حالة استخدام مسارين مختلفين ضمن نظام الملفات يمكن للمستخدم استخدام الرمز `$` ضمن المسار لجعل
المسار نسبة إلى الملف المصدري الذي يُستخدم فيه المبدل `مسار_موارد` وهذا يتيح لك تحزيم الموارد مع
المكتبات والإشارة إلى مكان هذه الموارد ضمن المكتبة بغض النظر عن مكان المكتبة في نظام الملفات.
على سبيل المثال:

<div dir=rtl>

```
@مسار_موارد["/images/"] عرف مسار_الموارد: ("$الصور/"، "الصور/")؛
```

</div>

```
@assetsRoute["/images/"] def assetsRoute: ("$Images/", "Images/");
```

في هذا المثال نخبر مـنصة_ويب أن الصور موجودة ضمن المكتبة الحالية ومسارها هو `<مسار_المكتبة>/الصور`
وعند بناء النسخة الرقمية من المشروع ستُنسخ هذه الملفات إلى المجلد `الصور/` ضمن مجلد البناء، أي
المجلد الذي ستُبنى فيه النسخة الرقمية. فأثناء التطوير تُتسخدم الملفات مباشرة من مكانها ضمن المكتبة
بينما بعد البناء تبحث مـنصة_ويب عن هذه الملفات ضمن مسار مختلف خاص بالنسخة الرقمية.


### دالة هات_مسارات_الموارد_لوحدات (getAssetsRoutesFromModules)

<div dir=rtl>

```
دالة هات_مسارات_الموارد_لوحدات (
    سند_وحدات: سند[الـقلب.أسـاسيات.كـائن_بهوية]
): مـصفوفة[مـسار_سواكن]؛
```

</div>

```
func getAssetsRoutesFromModules (
    modulesRef: ref[Core.Basic.TiObject]
): Array[StaticRoute];
```

تجلب معلومات مسارات الموارد المعرفة ضمن الوحدات المشار إليها.


### الصنف مـسار_سواكن (StaticRoute)

<div dir=rtl>

```
صنف مـسار_سواكن {
    عرف مسار_الخادم: نـص؛
    عرف مسار_المصدر: نـص؛
    عرف مسار_البناء: نـص؛
}
```

</div>

```
class StaticRoute {
    def uri: String;
    def srcPath: String;
    def buildPath: String;
}
```

يحتوي هذا الصنف على معلومات حول مسار موارد محدد.

`مسار_الخادم` (`uri`) مسار الموارد على خادم HTTP، أي المسار الذي يمكن من خلاله الوصول إلى الموارد
عبر طلب HTTP.

`مسار_المصدر` (`srcPath`) المسار المصدري لهذه الموارد في نظام الملفات. هذا المسار هو المسار الذي
يستخدم عند تشغيل الخادم مباشرة دون بناء مسبق. يشير هذا في العادة إلى مكان الموارد ضمن الشفرة
المصدرية.

`مسار_البناء` (`buildPath`) المسار في نظام الملفات الذي سيستخدم عند إنشاء نسخة رقمية من المشروع.

