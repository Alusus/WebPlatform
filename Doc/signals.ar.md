# WebPlatform

[[English]](signals.en.md)

[[رجوع]](../readme.ar.md)

## الإشـارات (Signals)

الإشارات تمكن المستخدم من استلام إشعارات بما يحدث بشكل لا متزامن سواء في واجهة المستخدم أو غيرها.

### إشـارة (Signal)

<div dir=rtl>

```
صنف إشـارة [صنف_المالك: صنف، صنف_الحمولة: صنف] {
    عرف اربط(خانة: مغلف(سند[نمط_المالك]، حمولة: سند[نمط_الحمولة]))؛
    عرف افصل(خانة: مغلف(سند[نمط_المالك]، حمولة: سند[نمط_الحمولة]))؛
    عرف هات_عدد_الروابط(): صـحيح؛
}
```

</div>

```
class Signal [ownerType: type, payloadType: type] {
    handler this.connect(slot: closure (ref[ownerType], payload: ref[payloadType]));
    handler this.disconnect(slot: closure (ref[ownerType], payload: ref[payloadType]));
    handler this.getConnectionCount (): Int;
}
```

إشارة يمكن الاشتراك بها لمعالجة الأحداث، و يمكن أن يكون هناك أكثر من مشترك واحد.

#### معطيات القالب

`صنف_المالك` (`ownerType`): صنف مالك هذه الإشارة، أي الصنف الذي عُرفت هذه الإشارة ضمنه، على سبيل
المثال `ودجـة` (`Widget`). يحدد هذا المعطى صنف المعطى الأول للمغلفة التي تربطها بهذه الإشارة لاستلام
الأحداث. صنف معطى المغلفة يكون سندا لهذا الصنف.

`صنف_الحمولة` (`payloadType`): صنف البيانات التي تُمرر للمغلفات المرتبطة بهذه الإشارة. يحدد هذا
المعطى صنف المعطى الثاني للمغلفة، والذي يكون سندا لهذا الصنف.

مثلا، لو عرفنا الإشارة `إشـارة[ودجـة، نـص]` (`Signal[Widget, String]`) فإن المغلفة التي تُربط بهذه
الإشارة تعرف كالتالي:

<div dir=rtl>

```
مغلفة (سند[ودجـة]، سند[نـص]) { ... }
```

</div>

```
closure (ref[Widget], ref[String]) { ... }
```

#### الدالات

`اربط` (`connect`) طريقة لربط مغلف مع الإشارة، بحيث عندما يتم إرسال الإشارة يتم استدعاءه و تمرير الحمولة إليه.

`افصل` (`disconnect`) طريقة لفصل مغلفة تم ربطها بواسطة التابع السابق عن الإشارة.

`هات_عدد_الروابط` (`getConnectionCount`) طريقة تعيد عدد الروابط للإشارة.


### إشـارة_حدث_دوم (DomEventSignal)

<div dir=rtl>

```
صنف إشـارة_حدث_دوم {
    عرف المبدئي_مكبوح: ثـنائي = خطأ؛
}
```

</div>

```
class DomEventSignal [ownerType: type, payloadType: type] {
    def defaultPrevented: Bool = false;
}
```

هذا الصنف مشتق من الصنف `إشـارة` (`Signal`) ويستخدم للإشارات القادمة من عناصر المتصفح.

`المبدئي_مكبوح` (`defaultPrevented`) تحديد فيما إذا كان يجب تنفيذ الفعل الافتراضي أم لا.

