# WebPlatform

[[English]](widgets.en.md)

[[رجوع]](../readme.ar.md)

## الـودجات (Widgets)

### ودجـة (Widget)

الصنف الأساسي (الجذر) لكل الودجات.

#### المتغيرات

* `معرف` (`id`): `نـص`. معرف عنصر DOM المقابل لهذه الودجة.

#### الخصال

* `اسم_الفئة` (`className`): `نـص`. اسم الفئة للودجة، وتستعمل لتطبيق طراز تابع لفئة معينة.

#### الأحداث

##### عند_تغير_الأبعاد (onResize)

<div dir=rtl>

```
عرف عند_تغير_الأبعاد: إشـارة_حدث_دوم[ودجـة، صـحيح]؛
```

</div>

```
def onResize: DomEventSignal[Widget, Int];
```

إشارة بأن أبعاد الودجة تغيرت. الحمولة مهملة في هذا الحدث.

##### عند_تحريك_المؤشر (onMouseMove)

<div dir=rtl>

```
عرف عند_تحريك_المؤشر: إشـارة_حدث_دوم[ودجـة، حـمولة_تحريك_المؤشر]؛
```

</div>

```
def onMouseMove: DomEventSignal[Widget, MouseMovePayload];
```

إشارة بأن المؤشر تحرك.

##### عند_دخول_المؤشر (onMouseEnter)

<div dir=rtl>

```
عرف عند_دخول_المؤشر: إشـارة_حدث_دوم[ودجـة، صـحيح]؛
```

</div>

```
def onMouseEnter: DomEventSignal[Widget, Int];
```

إشارة بأن المؤشر دخل المنطقة الخاصة بالودجة. الحمولة مهملة في هذا الحدث.

##### عند_خروج_المؤشر (onMouseOut)

<div dir=rtl>

```
عرف عند_خروج_المؤشر: إشـارة_حدث_دوم[ودجـة، صـحيح]؛
```

</div>

```
def onMouseOut: DomEventSignal[Widget, Int];
```

إشارة بأن المؤشر خرج من المنطقة الخاصة بالودجة. الحملة مهملة في هذا الحدث.

##### عند_بدء_النقرة (onMouseDown)

<div dir=rtl>

```
عرف عند_بدء_النقرة: إشـارة_حدث_دوم[ودجـة، حـمولة_زر_المؤشر]؛
```

</div>

```
def onMouseDown: DomEventSignal[Widget, MouseButtonPayload];
```

إشارة بأنه تم بدء النقر بالمؤشر.

##### عند_انتهاء_النقرة (onMouseUp)

<div dir=rtl>

```
عرف عند_انتهاء_النقرة: إشـارة_حدث_دوم[ودجـة، حـمولة_زر_المؤشر]؛
```

</div>

```
def onMouseUp: DomEventSignal[Widget, MouseButtonPayload];
```

إشارة بأن النقر انتهى.

##### عند_الضغط (onClick)

<div dir=rtl>

```
عرف عند_الضغط: إشـارة_حدث_دوم[ودجـة، صـحيح]؛
```

</div>

```
def onClick: DomEventSignal[Widget, Int];
```

إشارة بأن ضغطة بزر الفأرة قد حدثت. الحمولة مهملة في هذا الحدث.

#### العمليات

##### الطراز (style)

<div dir=rtl>

```
عملية هذا.الطراز: سـندنا[طـقم_طرز]؛
عملية هذا.الطراز = سـندنا[طـقم_طرز]؛
```

</div>

```
handler this.style: SrdRef[StyleSet];
handler this.style = SrdRef[StyleSet];
```

تستخدم لتعديل طقم الطرز المخصص لهذه الودجة. يمكن تعيين طقم طرز مشترك مع ودجات أخرى. في حال محاولة
تغيير طقم الطرز الخاص بالودجة قبل تعيين طقم طرز لها سيُنشأ طقم طرز تلقائيًا لهذه الودجة.

##### هات_الأبعاد (getDimensions)

<div dir=rtl>

```
دالة هذا.هات_الأبعاد(): أبـعاد؛
```

</div>

```
handler this.getDimensions(): Dimensions;
```

دالة لجلب الأبعاد الحالية للودجة.

##### التمس_احتكار_المؤشر (requestPointerLock)

<div dir=rtl>

```
عملية هذا.التمس_احتكار_المؤشر()؛
```

</div>

```
handler this.requestPointerLock();
```

طلب احتكار المؤشر. يؤدي هذا لإزالة مؤشر الفأرة مع استمرار الودجة باستلام إشعارات تحرك المؤشر.

##### التمس_ملء_الشاشة (requestFullScreen)

<div dir=rtl>

```
عملية هذا.التمس_ملء_الشاشة()؛
```

</div>

```
handler this.requestFullScreen();
```

طلب الانتقال إلى وضع ملء الشاشة. سيؤدي هذا لتكبير الودجة لتملأ الشاشة.

##### مرر_إلى_المرأى (scrollIntoView)

<div dir=rtl>

```
عملية هذا.مرر_إلى_المرأى();
```

</div>

```
handler this.scrollIntoView();
```

طريقة تسمح بالنزول في الصفحة الحاوية لمجموعة عناصر إلى العنصر الذي استدعى هذه الطريقة ليصبح مرئياً.


### صـندوق (Box)

يمثل هذا الصنف مساحة مستطيلة الشكل تحوي على ودجات أخرى.

#### المتغيرات

* `فروع` (`children`): `مـصفوفة[سـندنا[ودجـة]]` (`Array[SrdRef[Widget]]`). مصفوفة تحمل الودجات التي يحويها هذا الصنف.

#### العمليات

##### أضف_فروع (addChildren)

<div dir=rtl>

```
عملية هذا.أضف_فروع(عدد: صـحيح، فروع: ...سند_مؤقت[سـندنا[ودجـة]])؛
```

</div>

```
handler this.addChildren (count: Int, children: ...temp_ref[SrdRef[Widget]]);
```

طريقة لإضافة فرع جديد أو أكثر ضمن هذا الصنف.

المعطيات:

* `عدد` (`count`) عدد الفروع التي نرغب بإضافتها.

* `فروع` (`children`) الفروع التي نريد إضافتها و التي هي عبارة عن ودجات.

##### أزل_فروع (removeChildren)

<div dir=rtl>

```
عملية هذا.أزل_فروع(عدد: صـحيح، فروع: ...سند_مؤقت[سـندنا[ودجـة]])؛
```

</div>

```
handler this.removeChildren (count: Int, children: ...temp_ref[SrdRef[Widget]]);
```
طريقة لإزالة فرع أو أكثر من الصنف.

المعطيات:

* `عدد` (`count`): عدد الفروع التي نرغب بإزالتها.

* `فروع` (`children`): الفروع التي نريد إزالتها و التي هي عبارة عن ودجات.


### مـرسم (Canvas)

يمثل هذه الصنف مساحة تستعمل للرسم بشكل حر.

#### المتغيرات

* `معرف_مورد` (`resourceId`): `صـحيح_متكيف`. المعرف الخاص بهذا المرسم، و هو فريد يمكن تمييز مرسم عن آخر بواسطته.

#### الوسائط

* `رسم` (`drawing`): `رسـم` (`Drawing`). يوفر هذا الصنف مكون `رسـم` لتمكين عمليات الرسم. راجع الصنف `رسـم` لمعرفة
  العمليات الرسومية التي يدعهما هذا الصنف.

#### الخصال

* `عرض_الصورة` (`bitmapWidth`): `سـندنا[مـسافة]` (`SrdRef[Length]`). عرض مساحة الرسم التي نريدها.

* `طول_الصورة` (`bitmapHeight`): `سـندنا[مـسافة]` (`SrdRef[Length]`). طول مساحة الرسم التي نريدها.


### صـورة (Image)

صنف يمثل صورة.

#### الخصال

* `الرابط` (`url`): `نـص` (`String`). رابط الصورة المراد عرضها.


### كـتابة (Text)

صنف لعرض كتابة ثابتة.

#### الخصال

* `النص` (`text`): `نـص` (`String`). النص المراد عرضه.

* `المعرف_المستهدف` (`targetId`): `نـص` (`String`). معرف الغرض الذي يرتبط به هذا النص، أي مثلاً نص
  بجانب مربع دخل يوضح أننا نريد اسم المستخدم.


### الـزر (Button)

صنف يمثل زر.

#### الخصال

* `النص` (`text`): `نـص` (`String`). النص الذي نريد عرضه على الزر.


### مـدخل_نـص (TextInput)

صنف يستعمل لإدخال نص، أي مثل مربع نص.

#### الخصال

* `النص` (`text`): `نـص` (`String`). النص المدخل من قبل المستخدم.

#### الأحداث

##### عند_الغيير (onChanged)

<div dir=rtl>

```
عرف عند_الغيير: إشـارة_حدث_دوم[مـدخل_نـص، صـحيح]؛
```

</div>

```
def onChanged: DomEventSignal[TextInput, Int];
```

يُثار هذا الحدث عند تغير النص المدخل. الحمولة مهملة في هذا الحدث.

##### عند_كبس_مفتاح (onKeyPress)

<div dir=rtl>

```
عرف عند_كبس_مفتاح: إشـارة_حدث_دوم[مـدخل_نـص، نـص]؛
```

</div>

```
def onKeyPress: DomEventSignal[TextInput, String];
```

يُثار هذا الحدث عند كبس زر في لوحة المفاتيح.

الحمولة: `نـص` (`String`). معرف الزر الذي كُبس.

##### عند_انتهاء_الكبسة (onKeyUp)

<div dir=rtl>

```
عرف عند_انتهاء_الكبسة: إشـارة_حدث_دوم[مـدخل_نـص، نـص]؛
```

</div>

```
def onKeyUp: DomEventSignal[TextInput, String];
```

يُثار هذا الحدث عند انتهاء كبسة زر في لوحة المفاتيح.

الحمولة: `نـص` (`String`). معرف الزر الذي كُبس.


### مـدخل (Input)

صنف عام يستعمل للإدخال.

#### الخصال

* `النص` (`text`): `نـص` (`String`). القيمة المدخلة من قبل المستخدم.

* `صنف_الإدخال` (`inputType`): `نـص` (`String`). نمط القيم المدخلة.

* `قيمة_وصفية` (`placeholder`): `نـص` (`String`). قيمة تظهر قبل أن يقوم المستخدم بالإدخال لتوضيح ما يجب إدخاله.

#### الأحداث

##### عند_الغيير (onChanged)

<div dir=rtl>

```
عرف عند_الغيير: إشـارة_حدث_دوم[مـدخل، صـحيح]؛
```

</div>

```
def onChanged: DomEventSignal[Input, Int];
```

يُثار الحدث عند تغير القيمة المدخلة. الحمولة مهملة في هذا الحدث.

##### عند_كبس_مفتاح (onKeyPress)

<div dir=rtl>

```
عرف عند_كبس_مفتاح: إشـارة_حدث_دوم[مـدخل، نـص]؛
```

</div>

```
def onKeyPress: DomEventSignal[Input, String];
```

يُثار عند كبس زر على لوحة المفاتيح.

الحمولة: `نـص` (`String`). معرف الزر الذي كُبس.

##### عند_انتهاء_الكبسة (onKeyUp)

<div dir=rtl>

```
عرف عند_انتهاء_الكبسة: إشـارة_حدث_دوم[مـدخل، نـص]؛
```

</div>

```
def onKeyUp: DomEventSignal[Input, String];
```

يُثار هذا الحدث عند انتهاء كبسة زر في لوحة المفاتيح.

الحمولة: `نـص` (`String`). معرف الزر الذي كُبس.


### خيارات (Select)

صنف يمثل عنصر الخيار من متعدد.

#### الخصال

* `العناصر` (`items`): `تـطبيق[نـص، نـص]` (`Map[String, String]`). الخيارات التي نريد المستخدم أن يختار منها.

#### الأحداث

##### عند_الغيير (onChanged)

<div dir=rtl>

```
عرف عند_الغيير: إشـارة_حدث_دوم[خيارات، صـحيح]؛
```

</div>

```
def onChanged: DomEventSignal[Select, Int];
```
يُثار عند تغير القيمة المختارة. الحمولة مهملة في هذا الحدث.

#### العمليات

##### هات_القيمة_المختارة (getSelectedValue)

<div dir=rtl>

```
عملية هذا.هات_القيمة_المختارة(): نـص؛
```

</div>

```
handler this.getSelectedValue(): String;
```

ترجع القيمة الحالية لاختيار المستخدم.

##### اختر_قيمة (selectValue)

<div dir=rtl>

```
عملية هذا.اختر_قيمة(القيمة_الجديدة: نـص)؛
```

</div>

```
handler this.selectValue(newValue: String);
```

تغيير الخيار الحالي.


### ارتباط_تشعبي (Hyperlink)

صنف يمثل ارتباط تشعبي.

#### الخصال

* `العنوان` (`url`): `نـص` (`String`). العنوان الذي يأخذنا إليه النقر على العنصر.

* `فرع` (`child`): `سـندنا[ودجـة]` (`SrdRef[Widget]`). العنصر المحتوى ضمن الارتباط التشعبي، مثلاً
  يمكن أن يحوي عنصر صورة، بحيث الضغط عليها يأخذنا إلى الرابط.

* `لسان_جديد` (`newTab`): `ثـنائي` (`Bool`). خصلة تحدد ما إذا كان النقر على الرابط يفتح الموقع
  المحدد في لسان جديد أم في نفس اللسان.

#### العمليات

##### حدد_الفرع (setChild)

<div dir=rtl>

```
عملية هذا.حدد_الفرع(الفرع: سند_مؤقت[سـندنا[ودجـة]])؛
```

</div>

```
handler this.setChild (child: temp_ref[SrdRef[Widget]]);
```

تحديد قيمة الفرع.


### مشهد_وثيقة (DocView)

صنف يستعمل لعرض وثيقة من النمط `HTML` أو `ماركداون`.

#### العمليات

##### حدد_لتنف (setHtml)

<div dir=rtl>

```
عملية هذا.حدد_لتنف(لتنف: نـص)؛
```

</div>

```
handler this.setHtml(html: String);
```

حدد قيمة HTML للمشهد.

##### حدد_ماركداون (setMarkdown)

<div dir=rtl>

```
عملية هذا.حدد_ماركداون(ماركداون: نـص)؛
عملية هذا.حدد_ماركداون(ماركداون: نـص، روابط_في_لسان_جديد: ثـنائي)؛
```

</div>

```
handler this.setMarkdown(md: String);
handler this.setMarkdown(md: String, linksInNewTab: Bool);
```

تحديدة قيمة ماركداون للمشهد. الصيغة الثانية من هذه الدالة تسمح بتحديد ما إن كانت الروابط تقتح
في لسان جديد أم في نفس اللسان. الصيغة الأولى تفتح الروابط في نفس اللسان.


## أصناف متعلقة

### حـمولة_تحريك_المؤشر (MouseMovePayload)

<div dir=rtl>

```
صنف حـمولة_تحريك_المؤشر {
    عرف موقع_س: عـائم = 0؛
    عرف موقع_ص: عـائم = 0؛
    عرف إزاحة_س: عـائم = 0؛
    عرف إزاحة_ص: عـائم = 0؛
}
```

</div>

```
class MouseMovePayload {
    def posX: Float = 0;
    def posY: Float = 0;
    def deltaX: Float = 0;
    def deltaY: Float = 0;
}
```

يحمل هذا الصنف معلومات حدث تحريك المؤشر.

`موقع_س` (`posX`) إحداثيات المؤشر على المحور س.

`موقع_ص` (`posY`) إحداثيات المؤشر على المحور ص.

`إزاحة_س` (`deltaX`) مقدار تحرك المؤشر على المحور س.

`إزاحة_ص` (`deltaY`) مقدار تحرك المؤشر على المحور ص.

### حـمولة_زر_المؤشر (MouseButtonPayload)

<div dir=rtl>

```
صنف حـمولة_زر_المؤشر {
    عرف الزر: صـحيح = 0؛
    عرف موقع_س: عـائم = 0؛
    عرف موقع_ص: عـائم = 0؛
}
```

</div>

```
class MouseButtonPayload {
    def button: Int = 0;
    def posX: Float = 0;
    def posY: Float = 0;
}
```
يحمل هذا الصنف معلومات حدث نقر المؤشر.

`الزر` (`button`) الزر الذي تم الضغط عليه.

`موقع_س` (`posX`) إحداثيات المؤشر على المحور س.

`موقع_ص` (`posY`) إحداثيات المؤشر على المحور ص.

